<mat-card class="track-card" [testId]="'track-item-' + track.id">
  <div class="track-card-select" *ngIf="selectMode">
    <mat-checkbox
      [checked]="selected"
      (change)="onSelect($event)"
      [testId]="'track-checkbox-' + track.id">
    </mat-checkbox>
  </div>

  <img mat-card-image [src]="track.coverImage || 'assets/images/default-cover.png'" [alt]="track.title" />
  <div class="track-card-cover">

    <button
      *ngIf="track.audioFile"
      mat-mini-fab
      color="primary"
      class="play-button"
      (click)="onPlay()"
      [testId]="isCurrentlyPlaying ? 'pause-button-' + track.id : 'play-button-' + track.id">
      <mat-icon>{{ isCurrentlyPlaying ? 'pause' : 'play_arrow' }}</mat-icon>
    </button>
  </div>

  <mat-card-content>
    <h3 class="track-title" [testId]="'track-item-' + track.id + '-title'">{{ track.title }}</h3>
    <p class="track-artist" [testId]="'track-item-' + track.id + '-artist'">{{ track.artist }}</p>
    <p class="track-album" *ngIf="track.album">{{ track.album }}</p>

    <div class="track-genres">
      <mat-chip-set>
        <mat-chip *ngFor="let genre of track.genres">{{ genre }}</mat-chip>
      </mat-chip-set>
    </div>
  </mat-card-content>

  <mat-card-actions>
    <button
      mat-icon-button
      (click)="onEdit()"
      [testId]="'edit-track-' + track.id">
      <mat-icon>edit</mat-icon>
    </button>

    <button
      mat-icon-button
      (click)="onUpload()"
      [testId]="'upload-track-' + track.id">
      <mat-icon>file_upload</mat-icon>
    </button>

    <button
      mat-icon-button
      color="warn"
      (click)="onDelete()"
      [testId]="'delete-track-' + track.id">
      <mat-icon>delete</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>
